<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard | Subjects_666</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { --bg: #05070a; --panel: #0d1117; --accent: #00ff88; --border: rgba(255,255,255,0.1); }
        * { box-sizing: border-box; font-family: sans-serif; }
        body { margin: 0; background: var(--bg); color: white; display: flex; min-height: 100vh; }
        
        aside { width: 260px; background: var(--panel); border-right: 1px solid var(--border); padding: 30px 20px; }
        main { flex: 1; padding: 40px; overflow-y: auto; }

        .card { background: var(--panel); border-radius: 20px; border: 1px solid var(--border); padding: 25px; margin-bottom: 25px; }
        
        table { width: 100%; border-collapse: collapse; }
        th { text-align: left; opacity: 0.5; padding: 15px; border-bottom: 1px solid var(--border); }
        td { padding: 15px; border-bottom: 1px solid rgba(255,255,255,0.02); }

        .btn-icon { background: none; border: none; color: white; cursor: pointer; font-size: 1.2rem; opacity: 0.6; transition: 0.3s; }
        .btn-icon:hover { opacity: 1; color: var(--accent); }

        /* Detay Paneli (Modal) */
        #detail-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); backdrop-filter: blur(10px); z-index: 100;
            align-items: center; justify-content: center;
        }
        .modal-content { background: var(--panel); padding: 40px; border-radius: 30px; width: 90%; max-width: 600px; position: relative; }
        .close-modal { position: absolute; top: 20px; right: 20px; cursor: pointer; font-size: 1.5rem; }

        input { background: #161b22; border: 1px solid var(--border); padding: 12px; border-radius: 10px; color: white; width: 100%; margin-bottom: 10px; }
        .btn-save { background: var(--accent); color: black; border: none; padding: 12px 25px; border-radius: 10px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

    <aside>
        <h2 style="color:var(--accent)">SUBJECTS_666</h2>
        <p style="opacity:0.5">Yönetim Paneli</p>
    </aside>

    <main>
        <div class="card">
            <h3>Yeni Kelime Ekle</h3>
            <div style="display:flex; gap:10px;">
                <input type="text" id="new-word" placeholder="Kelime">
                <input type="text" id="new-img" placeholder="Görsel URL">
                <button class="btn-save" onclick="addWord()">Ekle</button>
            </div>
        </div>

        <div class="card">
            <table>
                <thead>
                    <tr>
                        <th>Kelime</th>
                        <th>İstatistik</th>
                        <th>Detay</th>
                        <th>İşlem</th>
                    </tr>
                </thead>
                <tbody id="table-body"></tbody>
            </table>
        </div>
    </main>

    <div id="detail-modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">×</span>
            <h2 id="modal-title">Kelime Detayı</h2>
            <canvas id="myChart" style="margin: 20px 0;"></canvas>
            
            <div id="edit-area">
                <label>Kelimeyi Düzenle:</label>
                <input type="text" id="edit-name">
                <label>Görsel URL:</label>
                <input type="text" id="edit-img">
                <button class="btn-save" onclick="saveEdit()">Değişiklikleri Kaydet</button>
            </div>
        </div>
    </div>

    <script>
        let words = JSON.parse(localStorage.getItem('subjectWords')) || [];
        let currentEditId = null;
        let chartInstance = null;

        function renderTable() {
            const body = document.getElementById('table-body');
            body.innerHTML = '';
            words.forEach(w => {
                body.innerHTML += `
                    <tr>
                        <td><strong>${w.name}</strong></td>
                        <td>${w.hits} Başarı / %${w.score} Skor</td>
                        <td><button class="btn-icon" onclick="openModal(${w.id})">➔</button></td>
                        <td><button style="color:red; background:none; border:none; cursor:pointer" onclick="deleteWord(${w.id})">Sil</button></td>
                    </tr>
                `;
            });
            localStorage.setItem('subjectWords', JSON.stringify(words));
        }

        function addWord() {
            const name = document.getElementById('new-word').value;
            const img = document.getElementById('new-img').value;
            if(!name) return;
            words.push({ id: Date.now(), name, img: img || 'https://picsum.photos/400/250', hits: 0, score: 0, tries: 0 });
            renderTable();
        }

        function openModal(id) {
            currentEditId = id;
            const word = words.find(w => w.id === id);
            document.getElementById('modal-title').innerText = word.name + " Analizi";
            document.getElementById('edit-name').value = word.name;
            document.getElementById('edit-img').value = word.img;
            document.getElementById('detail-modal').style.display = 'flex';
            
            // Grafik Çizimi
            const ctx = document.getElementById('myChart').getContext('2d');
            if(chartInstance) chartInstance.destroy();
            chartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Başarılı', 'Hatalı Deneme'],
                    datasets: [{
                        label: 'Telaffuz Verileri',
                        data: [word.hits, word.tries - word.hits < 0 ? 0 : word.tries - word.hits],
                        backgroundColor: ['#00ff88', '#ff4d4d']
                    }]
                },
                options: { responsive: true, plugins: { legend: { display: false } } }
            });
        }

        function saveEdit() {
            const word = words.find(w => w.id === currentEditId);
            word.name = document.getElementById('edit-name').value;
            word.img = document.getElementById('edit-img').value;
            renderTable();
            closeModal();
        }

        function deleteWord(id) {
            words = words.filter(w => w.id !== id);
            renderTable();
        }

        function closeModal() { document.getElementById('detail-modal').style.display = 'none'; }
        
        renderTable();
    </script>
</body>
</html>
        refreshUI();
    </script>
</body>
</html>
